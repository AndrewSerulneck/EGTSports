<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marc's Parlays - NFL Betting</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; overflow-x: hidden; }
        .gradient-bg { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        .card { background: white; border-radius: 12px; padding: 24px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .btn { padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 16px; }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; }
        .game-card { background: white; border-radius: 12px; padding: 20px; margin-bottom: 16px; }
        .team-row { display: flex; justify-content: space-between; padding: 16px; background: #f8f9fa; border-radius: 8px; cursor: pointer; margin-bottom: 8px; transition: all 0.2s; }
        .team-row.selected { background: #d4edda; border: 2px solid #28a745; }
        .team-row.disabled { opacity: 0.6; cursor: not-allowed; }
        .team-row.won { background: #d4edda; border: 2px solid #28a745; }
        .team-row.lost { background: #f8d7da; border: 2px solid #dc3545; }
        input[type="text"], input[type="email"], input[type="tel"], input[type="password"], input[type="number"] { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; margin-bottom: 16px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.75); z-index: 1000; align-items: center; justify-content: center; padding: 20px; }
        .modal.active { display: flex; }
        .modal-content { background: white; border-radius: 12px; padding: 32px; max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto; }
        .text-center { text-align: center; }
        .text-white { color: white; }
        .mb-2 { margin-bottom: 16px; }
        .mb-4 { margin-bottom: 32px; }
        .hidden { display: none; }
        .payout-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        @media (max-width: 768px) {
            .payout-grid { grid-template-columns: repeat(2, 1fr); }
        }
        .radio-group { display: flex; gap: 20px; margin-bottom: 16px; }
        .radio-label { display: flex; align-items: center; gap: 8px; cursor: pointer; }
        .free-play-badge { background: #28a745; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; margin-left: 8px; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            const [isAdmin, setIsAdmin] = useState(false);
            const [showAdminLogin, setShowAdminLogin] = useState(false);
            const [showSubmissions, setShowSubmissions] = useState(false);
            const [adminPassword, setAdminPassword] = useState('');
            const [games, setGames] = useState([]);
            const [loading, setLoading] = useState(true);
            const [selectedPicks, setSelectedPicks] = useState({});
            const [showConfirmation, setShowConfirmation] = useState(false);
            const [ticketNumber, setTicketNumber] = useState('');
            const [showCheckout, setShowCheckout] = useState(false);
            const [contactInfo, setContactInfo] = useState({ name: '', email: '', phone: '', betAmount: '', confirmMethod: 'email', freePlay: 0 });
            const [showPayment, setShowPayment] = useState(false);
            const [submissions, setSubmissions] = useState([]);
            const [editingSubmission, setEditingSubmission] = useState(null);

            const ADMIN_PASSWORD = 'MeMarc25';
            const VENMO_USERNAME = 'Marc-Serulneck';
            const MAX_BET = 100;
            const GOOGLE_SHEET_URL = 'https://script.google.com/macros/s/AKfycbwUU7CtC2OY-jHq3P5W5ytDm02WSuGQ8R8bSmYvsE20sYb7HZHBKJQIcG8n6Z_K6SlW/exec';

            useEffect(() => {
                loadGames();
                loadSubmissions();
                const interval = setInterval(loadGames, 300000); // Check every 5 minutes instead of 1
                return () => clearInterval(interval);
            }, []);

            const loadGames = async () => {
                setLoading(true);
                try {
                    const stored = localStorage.getItem('marcs-parlays-games');
                    const storedTimestamp = localStorage.getItem('marcs-parlays-timestamp');
                    const now = Date.now();

                    if (stored && storedTimestamp && (now - parseInt(storedTimestamp)) < 300000) {
                        setGames(JSON.parse(stored));
                        setLoading(false);
                        return;
                    }

                    const response = await fetch('https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard');
                    const data = await response.json();

                    const formattedGames = data.events.map((event, index) => {
                        const competition = event.competitions[0];
                        const awayTeam = competition.competitors[1];
                        const homeTeam = competition.competitors[0];
                        const status = event.status.type.state;
                        const existingGame = stored ? JSON.parse(stored).find(g => g.espnId === event.id) : null;

                        return {
                            id: index + 1,
                            espnId: event.id,
                            date: new Date(event.date).toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' }),
                            time: new Date(event.date).toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' }) + ' ET',
                            awayTeam: awayTeam.team.displayName,
                            homeTeam: homeTeam.team.displayName,
                            awayTeamId: awayTeam.id,
                            homeTeamId: homeTeam.id,
                            awayScore: awayTeam.score || '0',
                            homeScore: homeTeam.score || '0',
                            awaySpread: existingGame?.awaySpread || '',
                            homeSpread: existingGame?.homeSpread || '',
                            status: status,
                            statusDetail: event.status.type.detail,
                            isFinal: status === 'post'
                        };
                    });

                    setGames(formattedGames);
                    localStorage.setItem('marcs-parlays-timestamp', now.toString());
                } catch (error) {
                    console.error('Error loading games:', error);
                }
                setLoading(false);
            };

            const loadSubmissions = () => {
                const stored = localStorage.getItem('marcs-parlays-submissions');
                if (stored) setSubmissions(JSON.parse(stored));
            };

            const saveSubmission = async (submission) => {
                const allSubmissions = [...submissions, submission];
                setSubmissions(allSubmissions);
                localStorage.setItem('marcs-parlays-submissions', JSON.stringify(allSubmissions));

                try {
                    await fetch(GOOGLE_SHEET_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(submission)
                    });

                    // Send confirmation
                    if (submission.contactInfo.confirmMethod === 'email') {
                        sendEmailConfirmation(submission);
                    } else {
                        sendTextConfirmation(submission);
                    }
                } catch (error) {
                    console.error('Error sending to Google Sheets:', error);
                }
            };

            const sendEmailConfirmation = (submission) => {
                console.log('Email confirmation would be sent to:', submission.contactInfo.email);
                console.log('Ticket:', submission.ticketNumber);
                // Note: Actual email sending requires a backend service
            };

            const sendTextConfirmation = (submission) => {
                console.log('Text confirmation would be sent to:', submission.contactInfo.phone);
                console.log('Ticket:', submission.ticketNumber);
                // Note: Actual SMS sending requires a backend service like Twilio
            };

            const updateSubmissionFreePlay = (index, amount) => {
                const updatedSubmissions = [...submissions];
                updatedSubmissions[index].freePlay = amount;
                setSubmissions(updatedSubmissions);
                localStorage.setItem('marcs-parlays-submissions', JSON.stringify(updatedSubmissions));
            };

            const saveGames = () => {
                localStorage.setItem('marcs-parlays-games', JSON.stringify(games));
                localStorage.setItem('marcs-parlays-timestamp', Date.now().toString());
                alert('Games and odds saved!');
            };

            const updateSpread = (gameId, team, value) => {
                setGames(games.map(game =>
                    game.id === gameId
                        ? { ...game, [team === 'away' ? 'awaySpread' : 'homeSpread']: value }
                        : game
                ));
            };

            const toggleTeam = (gameId, teamType) => {
                setSelectedPicks(prev => {
                    const newPicks = { ...prev };
                    if (newPicks[gameId] === teamType) {
                        delete newPicks[gameId];
                    } else {
                        newPicks[gameId] = teamType;
                    }
                    return newPicks;
                });
            };

            const generateTicketNumber = () => {
                const timestamp = Date.now().toString(36).toUpperCase();
                const random = Math.random().toString(36).substring(2, 8).toUpperCase();
                return `TKT-${timestamp}-${random}`;
            };

            const submitPicks = () => {
                const pickCount = Object.keys(selectedPicks).length;
                if (pickCount < 3) {
                    alert('Please select at least 3 picks!');
                    return;
                }
                setTicketNumber(generateTicketNumber());
                setShowConfirmation(true);
            };

            const handleCheckoutSubmit = () => {
                const betAmount = parseFloat(contactInfo.betAmount);
                
                if (!contactInfo.name || !contactInfo.email || !contactInfo.phone) {
                    alert('Please fill in all contact information');
                    return;
                }

                if (!betAmount || betAmount <= 0) {
                    alert('Please enter a valid bet amount');
                    return;
                }

                if (betAmount > MAX_BET) {
                    alert(`Maximum bet is $${MAX_BET}`);
                    return;
                }

                const submission = {
                    ticketNumber,
                    timestamp: new Date().toISOString(),
                    contactInfo: {
                        name: contactInfo.name,
                        email: contactInfo.email,
                        phone: contactInfo.phone,
                        confirmMethod: contactInfo.confirmMethod
                    },
                    betAmount: betAmount,
                    freePlay: 0,
                    picks: Object.entries(selectedPicks).map(([gameId, teamType]) => {
                        const game = games.find(g => g.id == gameId);
                        return {
                            gameId: game.espnId,
                            team: teamType === 'away' ? game.awayTeam : game.homeTeam,
                            spread: teamType === 'away' ? game.awaySpread : game.homeSpread,
                            pickedTeamType: teamType
                        };
                    }),
                    paymentStatus: 'pending'
                };

                console.log('NEW SUBMISSION:', JSON.stringify(submission, null, 2));
                saveSubmission(submission);
                setShowPayment(true);
            };

            const calculateResult = (submission) => {
                let wins = 0;
                let losses = 0;
                let pending = 0;

                submission.picks.forEach(pick => {
                    const game = games.find(g => g.espnId === pick.gameId);
                    if (!game || !game.isFinal) {
                        pending++;
                        return;
                    }

                    const awayScore = parseInt(game.awayScore);
                    const homeScore = parseInt(game.homeScore);
                    const spread = parseFloat(pick.spread);

                    let won = false;
                    if (pick.pickedTeamType === 'away') {
                        const adjustedScore = awayScore + spread;
                        won = adjustedScore > homeScore;
                    } else {
                        const adjustedScore = homeScore + spread;
                        won = adjustedScore > awayScore;
                    }

                    if (won) wins++;
                    else losses++;
                });

                const allGamesComplete = pending === 0;
                const parlayWon = allGamesComplete && losses === 0 && wins === submission.picks.length;

                return { wins, losses, pending, allGamesComplete, parlayWon };
            };

            if (loading) {
                return (
                    <div className="gradient-bg" style={{display: 'flex', alignItems: 'center', justifyContent: 'center', minHeight: '100vh'}}>
                        <div className="text-white" style={{fontSize: '24px'}}>Loading games from ESPN...</div>
                    </div>
                );
            }

            if (showSubmissions && isAdmin) {
                return (
                    <div className="gradient-bg">
                        <div className="container">
                            <div className="card">
                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px'}}>
                                    <h1>📊 All Submissions ({submissions.length})</h1>
                                    <button className="btn btn-secondary" onClick={() => setShowSubmissions(false)}>Back</button>
                                </div>
                            </div>
                            {submissions.length === 0 ? (
                                <div className="card text-center">
                                    <p>No submissions yet</p>
                                </div>
                            ) : (
                                submissions.slice().reverse().map((sub, idx) => {
                                    const actualIndex = submissions.length - 1 - idx;
                                    const result = calculateResult(sub);
                                    const totalBet = sub.betAmount + (sub.freePlay || 0);
                                    
                                    return (
                                        <div key={idx} className="card">
                                            <div style={{marginBottom: '16px', display: 'flex', justifyContent: 'space-between', alignItems: 'start'}}>
                                                <div>
                                                    <strong style={{fontSize: '20px', color: '#28a745'}}>{sub.ticketNumber}</strong>
                                                    {sub.freePlay > 0 && <span className="free-play-badge">${sub.freePlay} Free Play</span>}
                                                    <div style={{color: '#666', fontSize: '14px'}}>{new Date(sub.timestamp).toLocaleString()}</div>
                                                </div>
                                                {result.allGamesComplete && (
                                                    <div style={{
                                                        padding: '8px 16px',
                                                        borderRadius: '8px',
                                                        fontWeight: 'bold',
                                                        background: result.parlayWon ? '#28a745' : '#dc3545',
                                                        color: 'white'
                                                    }}>
                                                        {result.parlayWon ? 'WON' : 'LOST'}
                                                    </div>
                                                )}
                                            </div>
                                            <div style={{marginBottom: '16px', padding: '16px', background: '#f8f9fa', borderRadius: '8px'}}>
                                                <div><strong>Name:</strong> {sub.contactInfo.name}</div>
                                                <div><strong>Email:</strong> {sub.contactInfo.email}</div>
                                                <div><strong>Phone:</strong> {sub.contactInfo.phone}</div>
                                                <div><strong>Bet Amount:</strong> ${sub.betAmount.toFixed(2)}</div>
                                                <div><strong>Confirmation Method:</strong> {sub.contactInfo.confirmMethod}</div>
                                            </div>
                                            <div style={{marginBottom: '16px'}}>
                                                <strong>Record: {result.wins}-{result.losses}</strong>
                                                {result.pending > 0 && <span style={{color: '#666'}}> ({result.pending} pending)</span>}
                                            </div>
                                            <div style={{marginBottom: '16px'}}>
                                                <strong>Picks ({sub.picks.length}):</strong>
                                                {sub.picks.map((pick, i) => {
                                                    const game = games.find(g => g.espnId === pick.gameId);
                                                    let status = 'pending';
                                                    if (game && game.isFinal) {
                                                        const awayScore = parseInt(game.awayScore);
                                                        const homeScore = parseInt(game.homeScore);
                                                        const spread = parseFloat(pick.spread);
                                                        
                                                        if (pick.pickedTeamType === 'away') {
                                                            const adjustedScore = awayScore + spread;
                                                            status = adjustedScore > homeScore ? 'won' : 'lost';
                                                        } else {
                                                            const adjustedScore = homeScore + spread;
                                                            status = adjustedScore > awayScore ? 'won' : 'lost';
                                                        }
                                                    }
                                                    
                                                    return (
                                                        <div key={i} style={{
                                                            padding: '12px',
                                                            background: status === 'won' ? '#d4edda' : status === 'lost' ? '#f8d7da' : '#f8f9fa',
                                                            borderRadius: '8px',
                                                            marginTop: '8px',
                                                            border: status === 'won' ? '2px solid #28a745' : status === 'lost' ? '2px solid #dc3545' : 'none'
                                                        }}>
                                                            <div style={{display: 'flex', justifyContent: 'space-between'}}>
                                                                <span><strong>{pick.team}</strong> ({pick.spread})</span>
                                                                {game && game.isFinal && (
                                                                    <span style={{fontWeight: 'bold', color: status === 'won' ? '#28a745' : '#dc3545'}}>
                                                                        {status.toUpperCase()}
                                                                    </span>
                                                                )}
                                                            </div>
                                                            {game && game.isFinal && (
                                                                <div style={{fontSize: '14px', color: '#666', marginTop: '4px'}}>
                                                                    Final: {game.awayTeam} {game.awayScore} - {game.homeScore} {game.homeTeam}
                                                                </div>
                                                            )}
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                            <div style={{display: 'flex', gap: '8px', marginTop: '16px'}}>
                                                <input
                                                    type="number"
                                                    placeholder="Free play amount"
                                                    value={editingSubmission === actualIndex ? (sub.freePlay || 0) : ''}
                                                    onChange={(e) => {
                                                        setEditingSubmission(actualIndex);
                                                        updateSubmissionFreePlay(actualIndex, parseFloat(e.target.value) || 0);
                                                    }}
                                                    style={{flex: 1, marginBottom: 0}}
                                                />
                                                <button
                                                    className="btn btn-primary"
                                                    onClick={() => {
                                                        alert(`Free play of $${sub.freePlay || 0} saved for ${sub.contactInfo.name}`);
                                                        setEditingSubmission(null);
                                                    }}
                                                >
                                                    Save Free Play
                                                </button>
                                            </div>
                                        </div>
                                    );
                                })
                            )}
                        </div>
                    </div>
                );
            }

            if (isAdmin) {
                return (
                    <div className="gradient-bg">
                        <div className="container">
                            <div className="card">
                                <div style={{display: 'flex', justifyContent: 'space-between', marginBottom: '16px', flexWrap: 'wrap', gap: '12px'}}>
                                    <h1>🔧 Admin Panel</h1>
                                    <div style={{display: 'flex', gap: '8px'}}>
                                        <button className="btn btn-primary" onClick={() => setShowSubmissions(true)}>
                                            Submissions ({submissions.length})
                                        </button>
                                        <button className="btn btn-secondary" onClick={() => setIsAdmin(false)}>Exit</button>
                                    </div>
                                </div>
                                <button className="btn btn-primary" onClick={loadGames}>Refresh from ESPN</button>
                            </div>

                            {games.map(game => (
                                <div key={game.id} className="card">
                                    <div style={{marginBottom: '16px', display: 'flex', justifyContent: 'space-between'}}>
                                        <span>{game.date} - {game.time}</span>
                                        {game.isFinal && (
                                            <span style={{color: '#666', fontWeight: '600'}}>
                                                FINAL: {game.awayTeam} {game.awayScore} - {game.homeScore} {game.homeTeam}
                                            </span>
                                        )}
                                    </div>
                                    <div>
                                        <label><strong>{game.awayTeam} (Away)</strong></label>
                                        <input type="text" value={game.awaySpread} onChange={(e) => updateSpread(game.id, 'away', e.target.value)} placeholder="+3.5" />
                                    </div>
                                    <div>
                                        <label><strong>{game.homeTeam} (Home)</strong></label>
                                        <input type="text" value={game.homeSpread} onChange={(e) => updateSpread(game.id, 'home', e.target.value)} placeholder="-3.5" />
                                    </div>
                                </div>
                            ))}

                            <div className="card">
                                <button className="btn btn-success" onClick={saveGames} style={{width: '100%', fontSize: '18px'}}>
                                    Save All Games & Odds
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (showAdminLogin) {
                return (
                    <div className="gradient-bg" style={{display: 'flex', alignItems: 'center', justifyContent: 'center', minHeight: '100vh'}}>
                        <div className="card" style={{maxWidth: '400px', width: '100%'}}>
                            <h2 className="text-center mb-4">Admin Login</h2>
                            <input
                                type="password"
                                value={adminPassword}
                                onChange={(e) => setAdminPassword(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && adminPassword === ADMIN_PASSWORD && setIsAdmin(true)}
                                placeholder="Enter password"
                            />
                            <button className="btn btn-primary" onClick={() => adminPassword === ADMIN_PASSWORD ? setIsAdmin(true) : alert('Incorrect password')} style={{width: '100%', marginBottom: '12px'}}>
                                Login
                            </button>
                            <button className="btn btn-secondary" onClick={() => setShowAdminLogin(false)} style={{width: '100%'}}>
                                Back
                            </button>
                        </div>
                    </div>
                );
            }

            if (showCheckout) {
                const pickCount = Object.keys(selectedPicks).length;
                return (
                    <div className="gradient-bg">
                        <div className="container" style={{maxWidth: '600px'}}>
                            <div className="text-center text-white mb-4">
                                <h1>💳 Checkout</h1>
                            </div>
                            <button className="btn btn-secondary mb-2" onClick={() => setShowCheckout(false)}>← Back</button>

                            <div className="card">
                                <div style={{background: '#f8f9fa', padding: '20px', borderRadius: '8px', textAlign: 'center', marginBottom: '24px'}}>
                                    <div style={{fontSize: '12px', color: '#666', marginBottom: '8px'}}>TICKET NUMBER</div>
                                    <div style={{fontSize: '24px', fontWeight: 'bold', color: '#28a745'}}>{ticketNumber}</div>
                                </div>

                                <h3 className="mb-2">Your Picks ({pickCount})</h3>
                                {Object.entries(selectedPicks).map(([gameId, teamType]) => {
                                    const game = games.find(g => g.id == gameId);
                                    const team = teamType === 'away' ? game.awayTeam : game.homeTeam;
                                    const spread = teamType === 'away' ? game.awaySpread : game.homeSpread;
                                    return (
                                        <div key={gameId} style={{display: 'flex', justifyContent: 'space-between', padding: '12px', background: '#f8f9fa', borderRadius: '8px', marginBottom: '8px'}}>
                                            <strong>{team}</strong>
                                            <span>{spread}</span>
                                        </div>
                                    );
                                })}

                                <h3 className="mb-2" style={{marginTop: '32px'}}>Contact Information</h3>
                                <label>Full Name *</label>
                                <input type="text" value={contactInfo.name} onChange={(e) => setContactInfo({...contactInfo, name: e.target.value})} />
                                
                                <label>Email *</label>
                                <input type="email" value={contactInfo.email} onChange={(e) => setContactInfo({...contactInfo, email: e.target.value})} />
                                
                                <label>Phone *</label>
                                <input type="tel" value={contactInfo.phone} onChange={(e) => setContactInfo({...contactInfo, phone: e.target.value})} placeholder="(555) 123-4567" />
                                
                                <label>Bet Amount * (Max ${MAX_BET})</label>
                                <input 
                                    type="number" 
                                    value={contactInfo.betAmount} 
                                    onChange={(e) => setContactInfo({...contactInfo, betAmount: e.target.value})} 
                                    placeholder="Enter amount"
                                    min="1"
                                    max={MAX_BET}
                                    step="0.01"
                                />

                                <label style={{marginBottom: '8px', display: 'block'}}>Confirmation Method *</label>
                                <div className="radio-group">
                                    <label className="radio-label">
                                        <input 
                                            type="radio" 
                                            name="confirmMethod" 
                                            value="email"
                                            checked={contactInfo.confirmMethod === 'email'}
                                            onChange={(e) => setContactInfo({...contactInfo, confirmMethod: e.target.value})}
                                        />
                                        Email
                                    </label>
                                    <label className="radio-label">
                                        <input 
                                            type="radio" 
                                            name="confirmMethod" 
                                            value="text"
                                            checked={contactInfo.confirmMethod === 'text'}
                                            onChange={(e) => setContactInfo({...contactInfo, confirmMethod: e.target.value})}
                                        />
                                        Text Message
                                    </label>
                                </div>

                                <button className="btn btn-success" onClick={handleCheckoutSubmit} style={{width: '100%', fontSize: '18px', marginTop: '16px'}}>
                                    Continue to Payment →
                                </button>

                                {showPayment && (
                                    <div style={{marginTop: '32px', paddingTop: '32px', borderTop: '2px solid #e0e0e0'}}>
                                        <h3 className="text-center mb-2">💰 Payment</h3>
                                        <div style={{background: '#f8f9fa', padding: '20px', borderRadius: '8px', textAlign: 'center', marginBottom: '20px'}}>
                                            <p>Venmo <strong>${contactInfo.betAmount}</strong> to</p>
                                            <p style={{fontSize: '20px', fontWeight: 'bold', color: '#333', marginTop: '8px'}}>@{VENMO_USERNAME}</p>
                                        </div>
                                        <a
                                            href={`venmo://paycharge?txn=pay&recipients=${VENMO_USERNAME}&amount=${contactInfo.betAmount}&note=${encodeURIComponent("Marc's Parlays - " + ticketNumber)}`}
                                            style={{display: 'block', padding: '16px', background: '#008CFF', color: 'white', textAlign: 'center', textDecoration: 'none', borderRadius: '8px', fontWeight: '600', fontSize: '18px'}}
                                        >
                                            V Pay ${contactInfo.betAmount} with Venmo
                                        </a>
                                        <div style={{marginTop: '16px', padding: '16px', background: '#d1ecf1', border: '2px solid #0c5460', borderRadius: '8px', fontSize: '14px', color: '#0c5460'}}>
                                            <strong>✅ Confirmation:</strong> You will receive a {contactInfo.confirmMethod === 'email' ? 'email' : 'text message'} confirmation shortly.
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            const pickCount = Object.keys(selectedPicks).length;
            const canSubmit = pickCount >= 3;

            return (
                <div className="gradient-bg">
                    <div className="container">
                        <div className="text-center text-white mb-4">
                            <h1 style={{fontSize: '42px'}}>🏈 Marc's Parlays</h1>
                            <p style={{fontSize: '22px'}}>NFL Betting Pool</p>
                            <button className="btn btn-secondary" onClick={() => setShowAdminLogin(true)} style={{marginTop: '16px'}}>
                                Admin Login
                            </button>
                        </div>

                        <div className="card">
                            <h2 className="text-center mb-2">💰 Payout Odds</h2>
                            <div className="payout-grid">
                                {[
                                    {picks: 3, payout: '10 to 1'}, 
                                    {picks: 4, payout: '15 to 1'}, 
                                    {picks: 5, payout: '25 to 1'}, 
                                    {picks: 6, payout: '50 to 1'}, 
                                    {picks: 7, payout: '100 to 1'}, 
                                    {picks: 8, payout: '150 to 1'}, 
                                    {picks: 9, payout: '200 to 1'}, 
                                    {picks: 10, payout: '250 to 1'}
                                ].map(item => (
                                    <div key={item.picks} style={{background: '#f8f9fa', padding: '14px', borderRadius: '8px', textAlign: 'center', border: '2px solid #e0e0e0'}}>
                                        <div style={{fontSize: '14px'}}>{item.picks} for {item.picks} pays</div>
                                        <div style={{fontSize: '18px', fontWeight: 'bold', color: '#28a745'}}>{item.payout}</div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {games.map(game => (
                            <div key={game.id} className="game-card">
                                <div style={{display: 'flex', justifyContent: 'space-between', marginBottom: '16px', paddingBottom: '12px', borderBottom: '2px solid #f0f0f0', flexWrap: 'wrap', gap: '8px'}}>
                                    <span>{game.date} - {game.time}</span>
                                    {game.isFinal && (
                                        <span style={{color: '#666', fontWeight: '600'}}>
                                            FINAL: {game.awayScore} - {game.homeScore}
                                        </span>
                                    )}
                                </div>

                                <div
                                    className={`team-row ${selectedPicks[game.id] === 'away' ? 'selected' : ''} ${game.isFinal ? 'disabled' : ''}`}
                                    onClick={() => !game.isFinal && toggleTeam(game.id, 'away')}
                                >
                                    <div>
                                        <strong>{game.awayTeam}</strong>
                                        <span style={{marginLeft: '8px', fontSize: '12px', background: '#e9ecef', padding: '4px 8px', borderRadius: '4px'}}>AWAY</span>
                                    </div>
                                    <strong>{game.awaySpread}</strong>
                                </div>

                                <div style={{textAlign: 'center', color: '#999', margin: '8px 0'}}>@</div>

                                <div
                                    className={`team-row ${selectedPicks[game.id] === 'home' ? 'selected' : ''} ${game.isFinal ? 'disabled' : ''}`}
                                    onClick={() => !game.isFinal && toggleTeam(game.id, 'home')}
                                >
                                    <div>
                                        <strong>{game.homeTeam}</strong>
                                        <span style={{marginLeft: '8px', fontSize: '12px', background: '#e9ecef', padding: '4px 8px', borderRadius: '4px'}}>HOME</span>
                                    </div>
                                    <strong>{game.homeSpread}</strong>
                                </div>
                            </div>
                        ))}

                        <div className="text-center mb-4">
                            <div className="text-white mb-2" style={{fontSize: '20px'}}>
                                Selected: {pickCount} pick{pickCount !== 1 ? 's' : ''}
                                {!canSubmit && <div style={{color: '#ffc107'}}>( minimum 3 required)</div>}
                            </div>
                            <button
                                className="btn btn-success"
                                onClick={submitPicks}
                                disabled={!canSubmit}
                                style={{padding: '18px 56px', fontSize: '20px'}}
                            >
                                {canSubmit ? 'Submit Picks' : `Select ${3 - pickCount} More`}
                            </button>
                        </div>

                        <div className="card">
                            <h3 className="mb-2">📋 Important Rules</h3>
                            <ul style={{marginLeft: '20px', lineHeight: '1.8'}}>
                                <li><strong>Minimum 3 picks required</strong></li>
                                <li><strong>Maximum bet: ${MAX_BET}</strong></li>
                                <li>Missing info = voided ticket</li>
                                <li>Must pay in advance via Venmo to <strong>@{VENMO_USERNAME}</strong></li>
                                <li>Winners paid following Tuesday</li>
                                <li>Cannot bet on games already completed</li>
                                <li>You will receive confirmation via your chosen method (email or text)</li>
                            </ul>
                            <div style={{background: '#fff3cd', border: '2px solid #ffc107', borderRadius: '8px', padding: '16px', marginTop: '20px', fontSize: '14px', color: '#856404'}}>
                                <strong>⚠️ Legal Disclaimer:</strong> For entertainment only. 21+ only. Private pool among friends. Check local laws. By clicking "Submit Picks", you acknowledge responsibility for compliance with all applicable laws and regulations.
                            </div>
                        </div>
                    </div>

                    <div className={`modal ${showConfirmation ? 'active' : ''}`}>
                        <div className="modal-content">
                            <h2 className="text-center" style={{fontSize: '32px', color: '#28a745', marginBottom: '20px'}}>✅ Picks Submitted!</h2>
                            <div style={{background: '#f8f9fa', padding: '20px', borderRadius: '8px', textAlign: 'center', marginBottom: '24px'}}>
                                <div style={{fontSize: '24px', fontWeight: 'bold'}}>{ticketNumber}</div>
                            </div>
                            <p className="text-center mb-4">Save this ticket number!</p>
                            <button
                                className="btn btn-primary"
                                onClick={() => { setShowConfirmation(false); setShowCheckout(true); }}
                                style={{width: '100%', fontSize: '18px'}}
                            >
                                Continue to Checkout
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
